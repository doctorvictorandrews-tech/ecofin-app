<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoFin - Question√°rio Completo</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #000; color: white; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(212, 168, 60, 0.2); }
        .input-field { background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(212, 168, 60, 0.3); color: white; padding: 0.75rem; border-radius: 0.5rem; width: 100%; transition: all 0.3s; }
        .input-field:focus { background: rgba(255, 255, 255, 0.12); border-color: #D4A83C; outline: none; box-shadow: 0 0 0 3px rgba(212, 168, 60, 0.1); }
        .btn-primary { background: #D4A83C; color: #000; font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; transition: all 0.3s; }
        .btn-primary:hover { background: #E5B94D; transform: translateY(-2px); }
        .btn-secondary { background: #333; color: white; font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; cursor: pointer; }
        .option-card { padding: 1rem; border-radius: 0.5rem; cursor: pointer; transition: all 0.3s; background: rgba(255, 255, 255, 0.05); border: 2px solid transparent; }
        .option-card:hover { background: rgba(255, 255, 255, 0.08); }
        .option-card.selected { background: rgba(212, 168, 60, 0.2); border-color: #D4A83C; }
        .upload-zone { border: 2px dashed rgba(212, 168, 60, 0.5); border-radius: 0.5rem; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s; }
        .upload-zone:hover { border-color: #D4A83C; background: rgba(212, 168, 60, 0.05); }
        .file-preview { background: rgba(212, 168, 60, 0.1); border: 1px solid rgba(212, 168, 60, 0.3); padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; display: flex; justify-content: space-between; align-items: center; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body>
    <nav style="background: #000; padding: 1.5rem; border-bottom: 1px solid rgba(212, 168, 60, 0.2);">
        <div style="max-width: 1200px; margin: 0 auto;">
            <a href="/" style="font-size: 1.5rem; font-weight: 700; color: white; text-decoration: none;">
                E<span style="color: #D4A83C;">CO</span>FIN
            </a>
        </div>
    </nav>
    <div id="app"></div>
    <script type="text/babel">
        const { useState } = React;

        function QuestionarioCompleto() {
            const [step, setStep] = useState(1);
            const [loading, setLoading] = useState(false);
            const [submitted, setSubmitted] = useState(false);
            const [documentos, setDocumentos] = useState({ contrato: null, extrato: null });
            
            const [formData, setFormData] = useState({
                // Etapa 1: Dados Pessoais
                nome: '', whatsapp: '', email: '', cpf: '', objetivo: '',
                // Etapa 2: Situa√ß√£o Profissional
                trabalhaCLT: null, tempoEmpresa: '', salarioMensal: 0, temFGTS: null, valorFGTS: 0,
                capacidadeExtra: 0, temReservaEmergencia: null, valorReserva: 0,
                // Etapa 3: Dados do Contrato (COMPLETO)
                banco: '', sistema: 'SAC', valorImovelOriginal: 0, valorFinanciado: 0,
                saldoDevedor: 0, taxaNominal: 0, prazoTotalOriginal: 0, prazoRestante: 0,
                valorParcelaAtual: 0, taxaAdm: 0, seguroMensal: 0, tr: 0.15,
                dataInicioContrato: '', dataUltimaAmortizacao: '',
                // Etapa 4: Estrat√©gia
                preferencia: '', planejamentoFuturo: '', observacoes: ''
            });

            const updateField = (field, value) => setFormData(prev => ({ ...prev, [field]: value }));
            const nextStep = () => setStep(step + 1);
            const prevStep = () => setStep(step - 1);

            const handleFileUpload = (type, event) => {
                const file = event.target.files[0];
                if (file) {
                    if (file.size > 10 * 1024 * 1024) {
                        alert('Arquivo muito grande! M√°ximo 10MB');
                        return;
                    }
                    setDocumentos(prev => ({ ...prev, [type]: file }));
                }
            };

            const handleSubmit = async () => {
                setLoading(true);
                try {
                    // Enviar dados para API
                    const response = await fetch('https://ecofin-app-production.up.railway.app/api/cliente', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            ...formData,
                            documentos: {
                                contrato: documentos.contrato?.name || '',
                                extrato: documentos.extrato?.name || ''
                            }
                        })
                    });
                    const data = await response.json();
                    if (data.sucesso) setSubmitted(true);
                    else alert('Erro ao processar. Tente novamente.');
                } catch (err) {
                    console.error('Erro:', err);
                    const clientes = JSON.parse(localStorage.getItem('ecofin_clientes') || '[]');
                    clientes.push({ ...formData, id: Date.now(), data: new Date().toISOString(), status: 'pendente' });
                    localStorage.setItem('ecofin_clientes', JSON.stringify(clientes));
                    setSubmitted(true);
                } finally {
                    setLoading(false);
                }
            };

            if (submitted) {
                return (
                    <div style={{minHeight: '80vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '2rem'}}>
                        <div className="glass animate-in" style={{borderRadius: '1rem', padding: '3rem', maxWidth: '600px', textAlign: 'center'}}>
                            <div style={{fontSize: '4rem', marginBottom: '1.5rem'}}>‚úÖ</div>
                            <h1 style={{fontSize: '2rem', fontWeight: '700', color: '#D4A83C', marginBottom: '1rem'}}>
                                Perfeito, {formData.nome}!
                            </h1>
                            <p style={{fontSize: '1.125rem', color: '#ccc', marginBottom: '2rem'}}>
                                Recebemos sua an√°lise completa com todos os documentos. Victor vai preparar seu relat√≥rio personalizado e entrar em contato em at√© 24h.
                            </p>
                            <div style={{background: 'rgba(212, 168, 60, 0.1)', border: '1px solid rgba(212, 168, 60, 0.3)', borderRadius: '0.5rem', padding: '1.5rem', marginBottom: '2rem'}}>
                                <p style={{color: 'white', fontWeight: '600', marginBottom: '0.5rem'}}>üìä O que acontece agora?</p>
                                <p style={{color: '#ccc', fontSize: '0.875rem'}}>
                                    ‚Ä¢ An√°lise detalhada do seu contrato<br/>
                                    ‚Ä¢ C√°lculo de 6+ estrat√©gias personalizadas<br/>
                                    ‚Ä¢ Relat√≥rio completo em PDF<br/>
                                    ‚Ä¢ Orienta√ß√£o sobre melhor caminho
                                </p>
                            </div>
                            <a href="/" className="btn-primary" style={{display: 'inline-block', textDecoration: 'none'}}>Voltar</a>
                        </div>
                    </div>
                );
            }

            return (
                <div style={{minHeight: '80vh', padding: '2rem 1rem'}}>
                    <div style={{maxWidth: '900px', margin: '0 auto'}}>
                        <div className="animate-in" style={{textAlign: 'center', marginBottom: '3rem'}}>
                            <h1 style={{fontSize: '2.5rem', fontWeight: '700', marginBottom: '1rem'}}>
                                An√°lise Completa <span style={{color: '#D4A83C'}}>EcoFin</span>
                            </h1>
                            <p style={{fontSize: '1.125rem', color: '#ccc'}}>
                                Preencha todos os dados para receber uma an√°lise profissional completa üìä
                            </p>
                        </div>

                        {/* Progress Bar */}
                        <div className="glass" style={{borderRadius: '1rem', padding: '1.5rem', marginBottom: '2rem'}}>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                {[1, 2, 3, 4].map((s) => (
                                    <div key={s} style={{display: 'flex', alignItems: 'center', flex: 1}}>
                                        <div style={{width: '45px', height: '45px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: '700', background: step >= s ? '#D4A83C' : '#333', color: step >= s ? '#000' : '#666', fontSize: '1.125rem'}}>
                                            {s}
                                        </div>
                                        {s < 4 && <div style={{flex: 1, height: '3px', margin: '0 0.5rem', background: step > s ? '#D4A83C' : '#333'}} />}
                                    </div>
                                ))}
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', marginTop: '1rem', fontSize: '0.875rem', color: '#9ca3af'}}>
                                <span>Dados Pessoais</span>
                                <span>Situa√ß√£o Financeira</span>
                                <span>Contrato</span>
                                <span>Estrat√©gia</span>
                            </div>
                        </div>

                        <div className="glass animate-in" style={{borderRadius: '1rem', padding: '2.5rem'}}>
                            {/* ETAPA 1: Dados Pessoais */}
                            {step === 1 && (
                                <div style={{display: 'flex', flexDirection: 'column', gap: '1.5rem'}}>
                                    <h2 style={{fontSize: '1.875rem', fontWeight: '700', color: '#D4A83C', marginBottom: '1rem'}}>
                                        üìã Seus Dados Pessoais
                                    </h2>
                                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem'}}>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Nome Completo *</label>
                                            <input type="text" className="input-field" placeholder="Jos√© da Silva" value={formData.nome} onChange={(e) => updateField('nome', e.target.value)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>WhatsApp *</label>
                                            <input type="tel" className="input-field" placeholder="(11) 99999-9999" value={formData.whatsapp} onChange={(e) => updateField('whatsapp', e.target.value)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Email</label>
                                            <input type="email" className="input-field" placeholder="seu@email.com" value={formData.email} onChange={(e) => updateField('email', e.target.value)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>CPF</label>
                                            <input type="text" className="input-field" placeholder="000.000.000-00" value={formData.cpf} onChange={(e) => updateField('cpf', e.target.value)} />
                                        </div>
                                    </div>
                                    <div>
                                        <label style={{display: 'block', color: '#ccc', marginBottom: '0.75rem', fontWeight: '600'}}>Qual seu principal objetivo? *</label>
                                        <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '0.75rem'}}>
                                            {[
                                                { value: 'quitar_rapido', label: 'üèÉ‚Äç‚ôÇÔ∏è Quitar r√°pido', desc: 'Liberdade financeira' },
                                                { value: 'reduzir_parcela', label: 'üí≥ Reduzir parcela', desc: 'Mais dinheiro no m√™s' },
                                                { value: 'menos_juros', label: 'üí∞ Economizar juros', desc: 'Pagar menos ao banco' },
                                                { value: 'balanceado', label: '‚öñÔ∏è Equilibrado', desc: 'Um pouco de tudo' }
                                            ].map(opt => (
                                                <div key={opt.value} className={`option-card ${formData.objetivo === opt.value ? 'selected' : ''}`} onClick={() => updateField('objetivo', opt.value)}>
                                                    <div style={{fontWeight: '600', color: 'white', marginBottom: '0.25rem'}}>{opt.label}</div>
                                                    <div style={{fontSize: '0.75rem', color: '#999'}}>{opt.desc}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* ETAPA 2: Situa√ß√£o Profissional e Financeira */}
                            {step === 2 && (
                                <div style={{display: 'flex', flexDirection: 'column', gap: '2rem'}}>
                                    <h2 style={{fontSize: '1.875rem', fontWeight: '700', color: '#D4A83C', marginBottom: '1rem'}}>
                                        üíº Situa√ß√£o Profissional e Financeira
                                    </h2>
                                    
                                    <div>
                                        <label style={{display: 'block', color: '#ccc', marginBottom: '0.75rem', fontWeight: '600'}}>Trabalha com carteira assinada (CLT)? *</label>
                                        <div style={{display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1rem'}}>
                                            {[{ value: true, label: '‚úÖ Sim, sou CLT' }, { value: false, label: '‚ùå N√£o, sou PJ/Aut√¥nomo' }].map(opt => (
                                                <div key={String(opt.value)} className={`option-card ${formData.trabalhaCLT === opt.value ? 'selected' : ''}`} onClick={() => updateField('trabalhaCLT', opt.value)} style={{textAlign: 'center'}}>
                                                    {opt.label}
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {formData.trabalhaCLT !== null && (
                                        <>
                                            <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem'}}>
                                                {formData.trabalhaCLT && (
                                                    <div>
                                                        <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Tempo na empresa atual (meses)</label>
                                                        <input type="number" className="input-field" placeholder="24" value={formData.tempoEmpresa} onChange={(e) => updateField('tempoEmpresa', e.target.value)} />
                                                    </div>
                                                )}
                                                <div>
                                                    <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Renda mensal (R$)</label>
                                                    <input type="number" className="input-field" placeholder="5000" value={formData.salarioMensal || ''} onChange={(e) => updateField('salarioMensal', parseFloat(e.target.value) || 0)} />
                                                </div>
                                            </div>

                                            <div>
                                                <label style={{display: 'block', color: '#ccc', marginBottom: '0.75rem', fontWeight: '600'}}>Tem FGTS dispon√≠vel? *</label>
                                                <div style={{display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1rem'}}>
                                                    {[{ value: true, label: '‚úÖ Sim' }, { value: false, label: '‚ùå N√£o' }].map(opt => (
                                                        <div key={String(opt.value)} className={`option-card ${formData.temFGTS === opt.value ? 'selected' : ''}`} onClick={() => updateField('temFGTS', opt.value)} style={{textAlign: 'center'}}>
                                                            {opt.label}
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>

                                            {formData.temFGTS && (
                                                <div>
                                                    <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Valor dispon√≠vel de FGTS (R$)</label>
                                                    <input type="number" className="input-field" placeholder="25000" value={formData.valorFGTS || ''} onChange={(e) => updateField('valorFGTS', parseFloat(e.target.value) || 0)} />
                                                </div>
                                            )}

                                            <div>
                                                <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Quanto pode investir EXTRA por m√™s? (R$)</label>
                                                <input type="number" className="input-field" placeholder="500" value={formData.capacidadeExtra || ''} onChange={(e) => updateField('capacidadeExtra', parseFloat(e.target.value) || 0)} />
                                                <p style={{fontSize: '0.75rem', color: '#999', marginTop: '0.5rem'}}>Valor dispon√≠vel al√©m da parcela atual</p>
                                            </div>

                                            <div>
                                                <label style={{display: 'block', color: '#ccc', marginBottom: '0.75rem', fontWeight: '600'}}>Possui reserva de emerg√™ncia?</label>
                                                <div style={{display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1rem'}}>
                                                    {[{ value: true, label: '‚úÖ Sim' }, { value: false, label: '‚ùå N√£o' }].map(opt => (
                                                        <div key={String(opt.value)} className={`option-card ${formData.temReservaEmergencia === opt.value ? 'selected' : ''}`} onClick={() => updateField('temReservaEmergencia', opt.value)} style={{textAlign: 'center'}}>
                                                            {opt.label}
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>

                                            {formData.temReservaEmergencia && (
                                                <div>
                                                    <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Valor da reserva (R$)</label>
                                                    <input type="number" className="input-field" placeholder="15000" value={formData.valorReserva || ''} onChange={(e) => updateField('valorReserva', parseFloat(e.target.value) || 0)} />
                                                </div>
                                            )}
                                        </>
                                    )}
                                </div>
                            )}

                            {/* ETAPA 3: Dados Completos do Contrato */}
                            {step === 3 && (
                                <div style={{display: 'flex', flexDirection: 'column', gap: '2rem'}}>
                                    <h2 style={{fontSize: '1.875rem', fontWeight: '700', color: '#D4A83C', marginBottom: '1rem'}}>
                                        üìÑ Dados Completos do Contrato
                                    </h2>
                                    
                                    <div style={{background: 'rgba(59, 130, 246, 0.1)', border: '1px solid rgba(59, 130, 246, 0.3)', borderRadius: '0.5rem', padding: '1rem'}}>
                                        <p style={{color: '#93c5fd', fontSize: '0.875rem'}}>
                                            üí° <strong>Dica:</strong> Voc√™ pode fazer upload do contrato no pr√≥ximo passo caso n√£o tenha todos os dados agora
                                        </p>
                                    </div>

                                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(220px, 1fr))', gap: '1.5rem'}}>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Banco/Institui√ß√£o *</label>
                                            <input type="text" className="input-field" placeholder="Caixa, Ita√∫..." value={formData.banco} onChange={(e) => updateField('banco', e.target.value)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Sistema *</label>
                                            <div style={{display: 'flex', gap: '0.5rem'}}>
                                                {['SAC', 'PRICE'].map(s => (
                                                    <div key={s} className={`option-card ${formData.sistema === s ? 'selected' : ''}`} onClick={() => updateField('sistema', s)} style={{flex: 1, textAlign: 'center', padding: '0.75rem'}}>
                                                        {s}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Valor do im√≥vel original (R$)</label>
                                            <input type="number" className="input-field" placeholder="350000" value={formData.valorImovelOriginal || ''} onChange={(e) => updateField('valorImovelOriginal', parseFloat(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Valor financiado (R$)</label>
                                            <input type="number" className="input-field" placeholder="280000" value={formData.valorFinanciado || ''} onChange={(e) => updateField('valorFinanciado', parseFloat(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Saldo devedor atual (R$) *</label>
                                            <input type="number" className="input-field" placeholder="250000" value={formData.saldoDevedor || ''} onChange={(e) => updateField('saldoDevedor', parseFloat(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Taxa de juros (% ao ano) *</label>
                                            <input type="number" step="0.01" className="input-field" placeholder="9.75" value={formData.taxaNominal * 100 || ''} onChange={(e) => updateField('taxaNominal', (parseFloat(e.target.value) || 0) / 100)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Prazo total original (meses)</label>
                                            <input type="number" className="input-field" placeholder="420" value={formData.prazoTotalOriginal || ''} onChange={(e) => updateField('prazoTotalOriginal', parseInt(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Prazo restante (meses) *</label>
                                            <input type="number" className="input-field" placeholder="360" value={formData.prazoRestante || ''} onChange={(e) => updateField('prazoRestante', parseInt(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Valor da parcela atual (R$)</label>
                                            <input type="number" className="input-field" placeholder="2500" value={formData.valorParcelaAtual || ''} onChange={(e) => updateField('valorParcelaAtual', parseFloat(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Taxa de administra√ß√£o (R$/m√™s)</label>
                                            <input type="number" className="input-field" placeholder="25" value={formData.taxaAdm || ''} onChange={(e) => updateField('taxaAdm', parseFloat(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Seguro (R$/m√™s)</label>
                                            <input type="number" className="input-field" placeholder="50" value={formData.seguroMensal || ''} onChange={(e) => updateField('seguroMensal', parseFloat(e.target.value) || 0)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Taxa Referencial (% ao m√™s)</label>
                                            <input type="number" step="0.01" className="input-field" placeholder="0.15" value={formData.tr || ''} onChange={(e) => updateField('tr', parseFloat(e.target.value) || 0.15)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Data in√≠cio do contrato</label>
                                            <input type="month" className="input-field" value={formData.dataInicioContrato} onChange={(e) => updateField('dataInicioContrato', e.target.value)} />
                                        </div>
                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Data √∫ltima amortiza√ß√£o</label>
                                            <input type="month" className="input-field" value={formData.dataUltimaAmortizacao} onChange={(e) => updateField('dataUltimaAmortizacao', e.target.value)} />
                                        </div>
                                    </div>

                                    {/* Upload de Documentos */}
                                    <div>
                                        <h3 style={{fontSize: '1.25rem', fontWeight: '700', color: 'white', marginBottom: '1rem'}}>üìé Upload de Documentos</h3>
                                        
                                        <div style={{marginBottom: '1.5rem'}}>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Contrato do Financiamento (PDF ou Imagem)</label>
                                            <input type="file" id="contrato" accept=".pdf,.jpg,.jpeg,.png" style={{display: 'none'}} onChange={(e) => handleFileUpload('contrato', e)} />
                                            <div className="upload-zone" onClick={() => document.getElementById('contrato').click()}>
                                                <div style={{fontSize: '2.5rem', marginBottom: '0.5rem'}}>üìÑ</div>
                                                <p style={{color: 'white', fontWeight: '600'}}>Clique para selecionar o contrato</p>
                                                <p style={{color: '#999', fontSize: '0.875rem', marginTop: '0.5rem'}}>PDF, JPG ou PNG (m√°x 10MB)</p>
                                            </div>
                                            {documentos.contrato && (
                                                <div className="file-preview">
                                                    <span style={{color: 'white', fontSize: '0.875rem'}}>‚úÖ {documentos.contrato.name}</span>
                                                    <button onClick={() => setDocumentos(prev => ({ ...prev, contrato: null }))} style={{background: 'none', border: 'none', color: '#ef4444', cursor: 'pointer', fontSize: '1.25rem'}}>√ó</button>
                                                </div>
                                            )}
                                        </div>

                                        <div>
                                            <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Extrato Atual (PDF ou Imagem)</label>
                                            <input type="file" id="extrato" accept=".pdf,.jpg,.jpeg,.png" style={{display: 'none'}} onChange={(e) => handleFileUpload('extrato', e)} />
                                            <div className="upload-zone" onClick={() => document.getElementById('extrato').click()}>
                                                <div style={{fontSize: '2.5rem', marginBottom: '0.5rem'}}>üìä</div>
                                                <p style={{color: 'white', fontWeight: '600'}}>Clique para selecionar o extrato</p>
                                                <p style={{color: '#999', fontSize: '0.875rem', marginTop: '0.5rem'}}>PDF, JPG ou PNG (m√°x 10MB)</p>
                                            </div>
                                            {documentos.extrato && (
                                                <div className="file-preview">
                                                    <span style={{color: 'white', fontSize: '0.875rem'}}>‚úÖ {documentos.extrato.name}</span>
                                                    <button onClick={() => setDocumentos(prev => ({ ...prev, extrato: null }))} style={{background: 'none', border: 'none', color: '#ef4444', cursor: 'pointer', fontSize: '1.25rem'}}>√ó</button>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* ETAPA 4: Estrat√©gia e Prefer√™ncias */}
                            {step === 4 && (
                                <div style={{display: 'flex', flexDirection: 'column', gap: '2rem'}}>
                                    <h2 style={{fontSize: '1.875rem', fontWeight: '700', color: '#D4A83C', marginBottom: '1rem'}}>
                                        üéØ Estrat√©gia e Planejamento
                                    </h2>
                                    
                                    <div>
                                        <label style={{display: 'block', color: '#ccc', marginBottom: '0.75rem', fontWeight: '600'}}>Qual sua prefer√™ncia na amortiza√ß√£o?</label>
                                        <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem'}}>
                                            {[
                                                { value: 'reduzir_prazo', label: '‚è±Ô∏è Reduzir prazo', desc: 'Quitar mais r√°pido' },
                                                { value: 'reduzir_parcela', label: 'üí∞ Reduzir parcela', desc: 'Pagar menos por m√™s' },
                                                { value: 'sem_preferencia', label: 'ü§∑ Sem prefer√™ncia', desc: 'Voc√™ decide' }
                                            ].map(opt => (
                                                <div key={opt.value} className={`option-card ${formData.preferencia === opt.value ? 'selected' : ''}`} onClick={() => updateField('preferencia', opt.value)}>
                                                    <div style={{fontWeight: '600', color: 'white', marginBottom: '0.25rem'}}>{opt.label}</div>
                                                    <div style={{fontSize: '0.75rem', color: '#999'}}>{opt.desc}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div>
                                        <label style={{display: 'block', color: '#ccc', marginBottom: '0.75rem', fontWeight: '600'}}>Planejamento futuro para o im√≥vel?</label>
                                        <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem'}}>
                                            {[
                                                { value: 'morar_sempre', label: 'üè† Morar sempre', desc: 'Casa pr√≥pria definitiva' },
                                                { value: 'vender_futuro', label: 'üíº Vender futuramente', desc: 'Investimento' },
                                                { value: 'trocar', label: 'üîÑ Trocar por outro', desc: 'Upgrade futuro' },
                                                { value: 'incerto', label: '‚ùì Incerto', desc: 'Ainda n√£o sei' }
                                            ].map(opt => (
                                                <div key={opt.value} className={`option-card ${formData.planejamentoFuturo === opt.value ? 'selected' : ''}`} onClick={() => updateField('planejamentoFuturo', opt.value)}>
                                                    <div style={{fontWeight: '600', color: 'white', marginBottom: '0.25rem'}}>{opt.label}</div>
                                                    <div style={{fontSize: '0.75rem', color: '#999'}}>{opt.desc}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div>
                                        <label style={{display: 'block', color: '#ccc', marginBottom: '0.5rem', fontWeight: '600'}}>Observa√ß√µes adicionais (opcional)</label>
                                        <textarea className="input-field" rows="4" placeholder="Alguma informa√ß√£o adicional importante que queira compartilhar..." value={formData.observacoes} onChange={(e) => updateField('observacoes', e.target.value)} />
                                    </div>

                                    {/* Resumo */}
                                    <div style={{background: 'rgba(212, 168, 60, 0.1)', border: '1px solid rgba(212, 168, 60, 0.3)', borderRadius: '0.5rem', padding: '1.5rem'}}>
                                        <h3 style={{fontSize: '1.125rem', fontWeight: '700', color: 'white', marginBottom: '1rem'}}>üìã Resumo da An√°lise</h3>
                                        <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', fontSize: '0.875rem'}}>
                                            <div>
                                                <p style={{color: '#999'}}>Cliente:</p>
                                                <p style={{color: 'white', fontWeight: '600'}}>{formData.nome || '‚Äî'}</p>
                                            </div>
                                            <div>
                                                <p style={{color: '#999'}}>Banco:</p>
                                                <p style={{color: 'white', fontWeight: '600'}}>{formData.banco || '‚Äî'}</p>
                                            </div>
                                            <div>
                                                <p style={{color: '#999'}}>Saldo Devedor:</p>
                                                <p style={{color: 'white', fontWeight: '600'}}>R$ {formData.saldoDevedor?.toLocaleString('pt-BR') || '‚Äî'}</p>
                                            </div>
                                            <div>
                                                <p style={{color: '#999'}}>Prazo Restante:</p>
                                                <p style={{color: 'white', fontWeight: '600'}}>{formData.prazoRestante ? `${formData.prazoRestante} meses` : '‚Äî'}</p>
                                            </div>
                                            <div>
                                                <p style={{color: '#999'}}>FGTS Dispon√≠vel:</p>
                                                <p style={{color: 'white', fontWeight: '600'}}>R$ {formData.valorFGTS?.toLocaleString('pt-BR') || '0'}</p>
                                            </div>
                                            <div>
                                                <p style={{color: '#999'}}>Capacidade Extra:</p>
                                                <p style={{color: 'white', fontWeight: '600'}}>R$ {formData.capacidadeExtra?.toLocaleString('pt-BR') || '0'}/m√™s</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Navega√ß√£o */}
                            <div style={{display: 'flex', justifyContent: 'space-between', marginTop: '2.5rem', paddingTop: '2rem', borderTop: '1px solid rgba(212, 168, 60, 0.2)'}}>
                                {step > 1 && (
                                    <button onClick={prevStep} className="btn-secondary">‚Üê Voltar</button>
                                )}
                                {step < 4 && (
                                    <button onClick={nextStep} className="btn-primary" style={{marginLeft: 'auto'}}
                                        disabled={step === 1 && (!formData.nome || !formData.whatsapp || !formData.objetivo)}>
                                        Pr√≥xima Etapa ‚Üí
                                    </button>
                                )}
                                {step === 4 && (
                                    <button onClick={handleSubmit} className="btn-primary" disabled={loading} style={{marginLeft: 'auto', fontSize: '1.125rem', padding: '1rem 2rem'}}>
                                        {loading ? 'Enviando...' : '‚úÖ Enviar An√°lise Completa'}
                                    </button>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<QuestionarioCompleto />, document.getElementById('app'));
    </script>
    <footer style="background: #000; padding: 3rem 1rem; margin-top: 4rem; border-top: 1px solid rgba(212, 168, 60, 0.2);">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center; color: #666;">
            <p>¬© 2025 EcoFin - An√°lise Profissional de Financiamentos</p>
        </div>
    </footer>
</body>
</html>
