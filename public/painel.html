<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoFin - Painel</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Manrope:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        :root {
            --bg-body: #050505;
            --bg-surface: #0F0F0F;
            --bg-card: #1A1A1A;
            --gold-primary: #D9890D;
            --gold-hover: #F59E0B;
            --text-primary: #FFFFFF;
            --text-secondary: #C4C4C4;
            --border-light: rgba(255, 255, 255, 0.1);
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
            --font-sans: 'Manrope', sans-serif;
            --font-body: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: var(--bg-body);
            color: var(--text-primary);
            font-family: var(--font-body);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .bg-blob {
            position: fixed; filter: blur(120px); z-index: -1; opacity: 0.15;
            animation: blobMove 20s infinite alternate ease-in-out; border-radius: 50%;
        }
        .blob-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: var(--gold-primary); }
        .blob-2 { bottom: -20%; right: -20%; width: 60vw; height: 60vw; background: #5a3a00; animation-delay: -10s; }
        @keyframes blobMove { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }

        .container { max-width: 1400px; margin: 0 auto; padding: 0 24px; }
        
        /* Login Screen */
        .login-screen { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .login-box { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 20px; padding: 48px; max-width: 400px; width: 100%; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
        .login-title { font-family: var(--font-sans); font-size: 28px; font-weight: 800; margin-bottom: 8px; text-align: center; }
        .login-subtitle { font-size: 14px; color: var(--text-secondary); text-align: center; margin-bottom: 32px; }
        
        .input-field {
            width: 100%; padding: 14px; background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-light); color: white; border-radius: 8px;
            font-family: var(--font-body); font-size: 14px; margin-bottom: 16px; transition: all 0.3s;
        }
        .input-field:focus { outline: none; border-color: var(--gold-primary); box-shadow: 0 0 0 3px rgba(217,137,13,0.1); }

        /* Header */
        .header {
            background: rgba(5, 5, 5, 0.95); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-light); padding: 20px 0;
            position: sticky; top: 0; z-index: 100;
        }
        .header-content { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
        .logo img { height: 40px; }
        .header-actions { display: flex; gap: 12px; align-items: center; }

        /* Main Content */
        .main-content { padding: 40px 0; }

        /* Stats Cards */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 32px; }
        .stat-card { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 16px; padding: 24px; transition: all 0.3s; }
        .stat-card:hover { border-color: var(--gold-primary); transform: translateY(-3px); box-shadow: 0 10px 30px rgba(217,137,13,0.2); }
        .stat-label { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); margin-bottom: 8px; font-weight: 700; }
        .stat-value { font-family: var(--font-mono); font-size: 32px; font-weight: 700; color: var(--gold-primary); }

        /* Card */
        .card { background: var(--bg-card); border: 1px solid var(--border-light); border-radius: 20px; padding: 32px; margin-bottom: 24px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid var(--border-light); }
        .card-title { font-family: var(--font-sans); font-size: 24px; font-weight: 700; display: flex; align-items: center; gap: 12px; }

        /* Search */
        .search-box { position: relative; margin-bottom: 24px; }
        .search-input { width: 100%; padding: 14px 14px 14px 48px; background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); color: white; border-radius: 12px; font-size: 14px; transition: all 0.3s; }
        .search-input:focus { outline: none; border-color: var(--gold-primary); box-shadow: 0 0 0 3px rgba(217,137,13,0.1); }
        .search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-secondary); font-size: 20px; }

        /* Table */
        .table-container { overflow-x: auto; border-radius: 12px; border: 1px solid var(--border-light); }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        thead { background: rgba(255,255,255,0.05); }
        thead th { text-align: left; padding: 16px; font-weight: 700; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); border-bottom: 2px solid var(--border-light); }
        tbody td { padding: 16px; border-bottom: 1px solid var(--border-light); }
        tbody tr { transition: all 0.2s; cursor: pointer; }
        tbody tr:hover { background: rgba(217,137,13,0.05); }

        /* Badge */
        .badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 100px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .badge.success { background: rgba(16,185,129,0.15); color: var(--success); border: 1px solid rgba(16,185,129,0.3); }
        .badge.warning { background: rgba(245,158,11,0.15); color: var(--warning); border: 1px solid rgba(245,158,11,0.3); }
        .badge.info { background: rgba(217,137,13,0.15); color: var(--gold-primary); border: 1px solid rgba(217,137,13,0.3); }

        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 14px 28px; background: var(--gold-primary); color: #000;
            font-weight: 800; font-family: var(--font-sans); text-transform: uppercase;
            letter-spacing: 0.5px; border-radius: 8px; border: none; cursor: pointer;
            transition: all 0.3s; font-size: 13px; text-decoration: none;
        }
        .btn:hover { transform: translateY(-2px); background: var(--gold-hover); box-shadow: 0 10px 30px rgba(217,137,13,0.4); }
        .btn-outline { background: transparent; border: 1px solid var(--border-light); color: white; }
        .btn-outline:hover { border-color: var(--gold-primary); color: var(--gold-primary); }
        .btn-sm { padding: 8px 16px; font-size: 12px; }

        /* Hero Card (Dashboard) */
        .hero-card {
            background: linear-gradient(135deg, rgba(217,137,13,0.15) 0%, rgba(0,0,0,0.9) 100%);
            border: 2px solid var(--gold-primary); border-radius: 24px; padding: 48px;
            margin-bottom: 32px; position: relative; overflow: hidden;
            box-shadow: 0 0 60px rgba(217,137,13,0.2);
        }
        .hero-card::before {
            content: ''; position: absolute; top: -50%; right: -10%;
            width: 400px; height: 400px;
            background: radial-gradient(circle, rgba(217,137,13,0.3) 0%, transparent 70%);
            border-radius: 50%; pointer-events: none;
        }
        .hero-title { font-family: var(--font-sans); font-size: 36px; font-weight: 800; margin-bottom: 8px; display: flex; align-items: center; gap: 15px; position: relative; z-index: 1; }
        .hero-subtitle { font-size: 16px; color: var(--text-secondary); margin-bottom: 40px; position: relative; z-index: 1; }
        .hero-metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; position: relative; z-index: 1; }
        .metric-box { background: rgba(0,0,0,0.6); padding: 28px; border-radius: 16px; border: 1px solid var(--border-light); transition: all 0.3s; }
        .metric-box:hover { border-color: var(--gold-primary); transform: translateY(-5px); box-shadow: 0 10px 30px rgba(217,137,13,0.2); }
        .metric-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-secondary); margin-bottom: 8px; font-weight: 700; display: flex; align-items: center; gap: 6px; }
        .metric-value { font-family: var(--font-mono); font-size: 32px; font-weight: 700; line-height: 1.2; color: var(--text-primary); }
        .metric-value.success { color: var(--success); text-shadow: 0 0 20px rgba(16,185,129,0.3); }
        .metric-value.warning { color: var(--warning); text-shadow: 0 0 20px rgba(245,158,11,0.3); }
        .metric-value.gold { color: var(--gold-primary); text-shadow: 0 0 20px rgba(217,137,13,0.3); }

        /* Tabs */
        .tabs { display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid var(--border-light); overflow-x: auto; padding-bottom: 2px; }
        .tab { padding: 12px 24px; background: transparent; border: none; color: var(--text-secondary); font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.3s; border-bottom: 3px solid transparent; white-space: nowrap; }
        .tab:hover { color: var(--gold-primary); }
        .tab.active { color: var(--gold-primary); border-bottom-color: var(--gold-primary); }

        /* Grid */
        .grid-2 { display: grid; grid-template-columns: 1fr; gap: 24px; margin-bottom: 24px; }
        @media(min-width: 992px) { .grid-2 { grid-template-columns: 1fr 1fr; } }

        /* Comparison */
        .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
        .comparison-box { background: rgba(255,255,255,0.03); padding: 24px; border-radius: 12px; border-left: 4px solid; transition: all 0.3s; }
        .comparison-box:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
        .comparison-box.danger { border-left-color: var(--danger); background: linear-gradient(135deg, rgba(239,68,68,0.05) 0%, rgba(0,0,0,0.3) 100%); }
        .comparison-box.success { border-left-color: var(--success); background: linear-gradient(135deg, rgba(16,185,129,0.08) 0%, rgba(0,0,0,0.3) 100%); }
        .comparison-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; font-weight: 700; opacity: 0.8; }
        .comparison-value { font-family: var(--font-mono); font-size: 26px; font-weight: 700; line-height: 1.2; }
        .comparison-subtitle { font-size: 12px; color: var(--text-secondary); margin-top: 6px; }

        /* Progress Bars */
        .progress-container { margin-bottom: 20px; }
        .progress-label { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 13px; font-weight: 600; }
        .progress-bar { height: 14px; background: rgba(255,255,255,0.05); border-radius: 7px; overflow: hidden; position: relative; }
        .progress-fill { height: 100%; border-radius: 7px; transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1); position: relative; }
        .progress-fill.danger { background: linear-gradient(90deg, var(--danger) 0%, #DC2626 100%); box-shadow: 0 0 15px rgba(239,68,68,0.5); }
        .progress-fill.success { background: linear-gradient(90deg, var(--success) 0%, #059669 100%); box-shadow: 0 0 15px rgba(16,185,129,0.5); }

        /* Timeline */
        .timeline { position: relative; padding-left: 50px; }
        .timeline::before { content: ''; position: absolute; left: 20px; top: 10px; bottom: 10px; width: 3px; background: linear-gradient(to bottom, var(--gold-primary), transparent); }
        .timeline-item { position: relative; margin-bottom: 32px; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 12px; border: 1px solid var(--border-light); transition: all 0.3s; }
        .timeline-item:hover { border-color: var(--gold-primary); transform: translateX(5px); }
        .timeline-item::before { content: ''; position: absolute; left: -34px; top: 25px; width: 14px; height: 14px; border-radius: 50%; background: var(--gold-primary); border: 3px solid var(--bg-card); box-shadow: 0 0 15px rgba(217,137,13,0.6); }
        .timeline-number { display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: var(--gold-primary); color: #000; border-radius: 50%; font-weight: 800; font-size: 14px; margin-bottom: 12px; }
        .timeline-title { font-weight: 700; font-size: 16px; margin-bottom: 6px; }
        .timeline-description { font-size: 14px; color: var(--text-secondary); line-height: 1.6; }

        /* Chart Container */
        .chart-container { position: relative; height: 300px; margin: 20px 0; }

        /* Highlight Box */
        .highlight-box {
            background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(0,0,0,0.5) 100%);
            border: 2px dashed rgba(16,185,129,0.4); border-radius: 16px; padding: 40px;
            text-align: center; margin: 32px 0; position: relative; overflow: hidden;
        }
        .highlight-box::before {
            content: ''; position: absolute; top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }
        @keyframes rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .highlight-label { font-size: 14px; text-transform: uppercase; letter-spacing: 2px; color: var(--success); margin-bottom: 12px; position: relative; z-index: 1; }
        .highlight-value { font-family: var(--font-mono); font-size: 56px; font-weight: 800; color: white; text-shadow: 0 0 30px rgba(16,185,129,0.5); line-height: 1.1; position: relative; z-index: 1; }
        .highlight-subtitle { font-size: 16px; color: var(--text-secondary); margin-top: 12px; position: relative; z-index: 1; }

        /* Loading */
        .loading { text-align: center; padding: 60px 20px; }
        .spinner { border: 4px solid rgba(217,137,13,0.1); border-top: 4px solid var(--gold-primary); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Empty State */
        .empty-state { text-align: center; padding: 80px 20px; color: var(--text-secondary); }
        .empty-state i { font-size: 64px; margin-bottom: 20px; opacity: 0.3; }

        /* Responsive */
        @media(max-width: 768px) {
            .hero-card { padding: 32px 24px; }
            .card { padding: 24px; }
            .comparison-grid { grid-template-columns: 1fr; }
            .hero-metrics { grid-template-columns: 1fr; }
            .hero-title { font-size: 28px; }
            .metric-value { font-size: 28px; }
            .timeline { padding-left: 40px; }
        }
    </style>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        const SENHA_ADMIN = "ecofin2025";
        const API_URL = "https://ecofin-backend.railway.app";

        // ==================== MOTOR DE CÁLCULO COMPLETO ====================
        class MotorCalculoCompleto {
            constructor(dados) {
                this.dados = dados;
                this.taxaMensal = Math.pow(1 + (dados.taxaNominal || dados.taxaAnual || 0), 1/12) - 1;
            }

            calcularPMT(taxa, nper, vp) {
                if (taxa === 0) return vp / nper;
                const fator = Math.pow(1 + taxa, nper);
                return vp * (taxa * fator) / (fator - 1);
            }

            simularCompleto(fgtsInicial, amortMensal, duracao = 999) {
                let saldo = this.dados.saldoDevedor - (fgtsInicial || 0);
                const detalhes = [];
                let totalPago = fgtsInicial || 0;
                let totalJuros = 0;
                let totalAmortizado = fgtsInicial || 0;
                let mes = 0;
                
                const tr = 0.0015;
                const taxaAdmin = this.dados.taxaAdm || 25;
                const seguro = this.dados.seguroMensal || 50;

                while (saldo > 1 && mes < 600) {
                    const saldoInicial = saldo;
                    const juros = saldo * this.taxaMensal;
                    
                    let amortBase;
                    if (this.dados.sistema === 'SAC') {
                        amortBase = this.dados.saldoDevedor / this.dados.prazoRestante;
                    } else {
                        const prazoRestante = Math.max(1, this.dados.prazoRestante - mes);
                        const pmt = this.calcularPMT(this.taxaMensal, prazoRestante, saldo);
                        amortBase = Math.max(0, pmt - juros);
                    }

                    const amortExtra = (mes <= duracao && amortMensal > 0) ? amortMensal : 0;
                    const parcela = juros + amortBase + amortExtra + taxaAdmin + seguro;
                    
                    if (mes === 0) {
                        saldo = saldo - amortBase - amortExtra;
                    } else if (amortExtra > 0) {
                        const correcaoTR = saldo * tr;
                        const amortExtraLiquida = Math.max(0, amortExtra - correcaoTR);
                        saldo = saldo - amortBase - amortExtraLiquida;
                    } else {
                        const correcaoTR = saldo * tr;
                        saldo = saldo - amortBase + correcaoTR;
                    }
                    
                    totalPago += parcela;
                    totalJuros += juros;
                    totalAmortizado += amortBase + amortExtra;
                    
                    detalhes.push({
                        mes: mes + 1,
                        ano: Math.floor(mes / 12) + 1,
                        saldoInicial: saldoInicial,
                        juros: juros,
                        amortBase: amortBase,
                        amortExtra: amortExtra,
                        amortTotal: amortBase + amortExtra,
                        parcela: parcela,
                        saldoFinal: saldo,
                        percentualQuitado: ((this.dados.saldoDevedor - saldo) / this.dados.saldoDevedor) * 100,
                        jurosAcumulados: totalJuros,
                        amortAcumulada: totalAmortizado
                    });

                    mes++;
                    if (saldo <= 1) break;
                }

                return { detalhes, totalPago, totalJuros, prazoMeses: mes, totalAmortizado };
            }

            encontrarEstrategiaOtima(recursos, objetivo = 'economia') {
                const cenarios = [];
                const original = this.simularCompleto(0, 0);
                
                const fgtsPercentuais = [0, 25, 50, 75, 100];
                const amortPercentuais = [0, 30, 50, 70, 100];
                const duracoes = [12, 24, 36, 60, 120, 240, 999];

                fgtsPercentuais.forEach(fgtsPct => {
                    const fgts = (recursos.valorFGTS || 0) * (fgtsPct / 100);
                    
                    amortPercentuais.forEach(amortPct => {
                        const amort = (recursos.capacidadeExtra || 0) * (amortPct / 100);
                        
                        if (fgts === 0 && amort === 0) return;
                        
                        duracoes.forEach(duracao => {
                            try {
                                const sim = this.simularCompleto(fgts, amort, duracao);
                                const duracaoReal = Math.min(duracao, sim.prazoMeses);
                                const investimento = fgts + (amort * duracaoReal);
                                
                                sim.fgtsUsado = fgts;
                                sim.amortMensal = amort;
                                sim.duracao = duracaoReal;
                                sim.economia = original.totalPago - sim.totalPago;
                                sim.reducaoPrazo = original.prazoMeses - sim.prazoMeses;
                                sim.investimentoTotal = investimento;
                                sim.roi = investimento > 0 ? sim.economia / investimento : 0;
                                
                                if (amort <= (recursos.capacidadeExtra || 0) * 0.3) {
                                    sim.viabilidade = 'ALTA';
                                } else if (amort <= (recursos.capacidadeExtra || 0) * 0.7) {
                                    sim.viabilidade = 'MÉDIA';
                                } else {
                                    sim.viabilidade = 'BAIXA';
                                }
                                
                                if (objetivo === 'prazo' || objetivo === 'quitar_rapido') {
                                    sim.score = sim.reducaoPrazo * 100 + (sim.economia / 1000);
                                } else {
                                    sim.score = sim.economia + (sim.roi * 10000);
                                }
                                
                                cenarios.push(sim);
                            } catch(e) {}
                        });
                    });
                });

                return cenarios.sort((a, b) => b.score - a.score)[0];
            }

            agruparPorAno(detalhes) {
                const anos = {};
                detalhes.forEach(mes => {
                    if (!anos[mes.ano]) {
                        anos[mes.ano] = {
                            ano: mes.ano,
                            meses: [],
                            totalPago: 0,
                            totalJuros: 0,
                            totalAmortizado: 0,
                            saldoInicial: 0,
                            saldoFinal: 0
                        };
                    }
                    
                    if (anos[mes.ano].meses.length === 0) {
                        anos[mes.ano].saldoInicial = mes.saldoInicial;
                    }
                    
                    anos[mes.ano].meses.push(mes);
                    anos[mes.ano].totalPago += mes.parcela;
                    anos[mes.ano].totalJuros += mes.juros;
                    anos[mes.ano].totalAmortizado += mes.amortTotal;
                    anos[mes.ano].saldoFinal = mes.saldoFinal;
                });
                
                return Object.values(anos);
            }
        }

        // ==================== COMPONENTE PRINCIPAL ====================
        function App() {
            const [logado, setLogado] = useState(false);
            const [senha, setSenha] = useState('');
            const [erro, setErro] = useState('');
            const [modo, setModo] = useState('lista'); // 'lista' ou 'dashboard'
            const [clienteSelecionado, setClienteSelecionado] = useState(null);
            const [clientes, setClientes] = useState([]);
            const [loading, setLoading] = useState(false);

            useEffect(() => {
                if (localStorage.getItem('ecofinAdmin') === 'true') {
                    setLogado(true);
                    verificarModo();
                }
            }, []);

            const verificarModo = () => {
                const urlParams = new URLSearchParams(window.location.search);
                const clienteId = urlParams.get('id');
                
                if (clienteId) {
                    carregarCliente(clienteId);
                } else {
                    carregarClientes();
                }
            };

            const fazerLogin = () => {
                if (senha === SENHA_ADMIN) {
                    localStorage.setItem('ecofinAdmin', 'true');
                    setLogado(true);
                    setErro('');
                    verificarModo();
                } else {
                    setErro('Senha incorreta');
                }
            };

            const fazerLogout = () => {
                localStorage.removeItem('ecofinAdmin');
                setLogado(false);
                setSenha('');
                setModo('lista');
                setClienteSelecionado(null);
            };

            const carregarClientes = async () => {
                setLoading(true);
                setModo('lista');
                
                try {
                    // MOCK DATA (substituir por chamada real à API)
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    setClientes([
                        {
                            id: 1, nome: 'Maria Silva', email: 'maria@email.com',
                            whatsapp: '83999999999', banco: 'Caixa Econômica',
                            saldoDevedor: 300000, taxaNominal: 0.12, prazoRestante: 420,
                            sistema: 'PRICE', economia: 939830, data_cadastro: '2025-01-07T10:30:00',
                            valorFGTS: 30000, capacidadeExtra: 1000,
                            taxaAdm: 25, seguroMensal: 50
                        },
                        {
                            id: 2, nome: 'João Santos', email: 'joao@email.com',
                            whatsapp: '83988888888', banco: 'Itaú',
                            saldoDevedor: 450000, taxaNominal: 0.11, prazoRestante: 360,
                            sistema: 'SAC', economia: 1250000, data_cadastro: '2025-01-06T14:20:00',
                            valorFGTS: 50000, capacidadeExtra: 1500,
                            taxaAdm: 30, seguroMensal: 60
                        },
                        {
                            id: 3, nome: 'Ana Paula', email: 'ana@email.com',
                            whatsapp: '83977777777', banco: 'Bradesco',
                            saldoDevedor: 200000, taxaNominal: 0.105, prazoRestante: 300,
                            sistema: 'PRICE', economia: 580000, data_cadastro: '2025-01-05T09:15:00',
                            valorFGTS: 20000, capacidadeExtra: 800,
                            taxaAdm: 25, seguroMensal: 50
                        }
                    ]);
                } catch (error) {
                    console.error('Erro ao carregar clientes:', error);
                }
                
                setLoading(false);
            };

            const carregarCliente = async (id) => {
                setLoading(true);
                setModo('dashboard');
                
                try {
                    // Buscar na lista ou API
                    const cliente = clientes.find(c => c.id === parseInt(id)) || {
                        id: 1, nome: 'Maria Silva', email: 'maria@email.com',
                        whatsapp: '83999999999', banco: 'Caixa Econômica',
                        saldoDevedor: 300000, taxaNominal: 0.12, prazoRestante: 420,
                        sistema: 'PRICE', valorFGTS: 30000, capacidadeExtra: 1000,
                        taxaAdm: 25, seguroMensal: 50
                    };
                    
                    setClienteSelecionado(cliente);
                } catch (error) {
                    console.error('Erro ao carregar cliente:', error);
                }
                
                setLoading(false);
            };

            const abrirDashboard = (clienteId) => {
                window.location.href = `?id=${clienteId}`;
            };

            const voltarParaLista = () => {
                window.location.href = window.location.pathname;
            };

            if (!logado) {
                return <LoginScreen senha={senha} setSenha={setSenha} fazerLogin={fazerLogin} erro={erro} />;
            }

            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <p>Carregando...</p>
                    </div>
                );
            }

            if (modo === 'dashboard' && clienteSelecionado) {
                return <DashboardCliente cliente={clienteSelecionado} voltarParaLista={voltarParaLista} fazerLogout={fazerLogout} />;
            }

            return <ListaClientes clientes={clientes} abrirDashboard={abrirDashboard} fazerLogout={fazerLogout} carregarClientes={carregarClientes} />;
        }

        // ==================== LOGIN SCREEN ====================
        function LoginScreen({ senha, setSenha, fazerLogin, erro }) {
            return (
                <div className="login-screen">
                    <div className="login-box">
                        <img src="https://meuecofin.com.br/wp-content/uploads/2025/02/Branco-PNG-e1740599425113.png" 
                             style={{maxWidth: '150px', margin: '0 auto 32px', display: 'block'}} />
                        
                        <h1 className="login-title">Painel Administrativo</h1>
                        <p className="login-subtitle">Insira sua senha para acessar</p>
                        
                        <input type="password" 
                               className="input-field" 
                               placeholder="Senha"
                               value={senha}
                               onChange={(e) => setSenha(e.target.value)}
                               onKeyPress={(e) => e.key === 'Enter' && fazerLogin()} />
                        
                        <button className="btn" style={{width: '100%'}} onClick={fazerLogin}>
                            <i className="ph-bold ph-sign-in"></i>
                            Entrar
                        </button>
                        
                        {erro && (
                            <div style={{color: 'var(--danger)', textAlign: 'center', marginTop: '16px', fontSize: '14px'}}>
                                {erro}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // ==================== LISTA DE CLIENTES ====================
        function ListaClientes({ clientes, abrirDashboard, fazerLogout, carregarClientes }) {
            const [busca, setBusca] = useState('');

            const clientesFiltrados = clientes.filter(c =>
                c.nome.toLowerCase().includes(busca.toLowerCase()) ||
                c.email.toLowerCase().includes(busca.toLowerCase()) ||
                c.banco.toLowerCase().includes(busca.toLowerCase())
            );

            const totalEconomia = clientes.reduce((sum, c) => sum + (c.economia || 0), 0);
            const totalClientes = clientes.length;
            
            const seteDiasAtras = new Date();
            seteDiasAtras.setDate(seteDiasAtras.getDate() - 7);
            const novos = clientes.filter(c => new Date(c.data_cadastro) >= seteDiasAtras).length;

            const formatarMoeda = (valor) => {
                if (valor >= 1000000) return `R$ ${(valor / 1000000).toFixed(1)}M`;
                if (valor >= 1000) return `R$ ${(valor / 1000).toFixed(0)}k`;
                return new Intl.NumberFormat('pt-BR', {
                    style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0
                }).format(valor);
            };

            const formatarData = (dataISO) => {
                const data = new Date(dataISO);
                const hoje = new Date();
                const diffDias = Math.floor((hoje - data) / (1000 * 60 * 60 * 24));
                
                if (diffDias === 0) return 'Hoje';
                if (diffDias === 1) return 'Ontem';
                if (diffDias < 7) return `${diffDias} dias atrás`;
                
                return data.toLocaleDateString('pt-BR', {
                    day: '2-digit', month: '2-digit', year: 'numeric'
                });
            };

            return (
                <>
                    <header className="header">
                        <div className="container">
                            <div className="header-content">
                                <div className="logo">
                                    <img src="https://meuecofin.com.br/wp-content/uploads/2025/02/Branco-PNG-e1740599425113.png" alt="EcoFin" />
                                </div>
                                <div className="header-actions">
                                    <span style={{fontSize: '14px', color: 'var(--text-secondary)'}}>
                                        Bem-vindo, <strong style={{color: 'var(--gold-primary)'}}>Admin</strong>
                                    </span>
                                    <button className="btn btn-outline btn-sm" onClick={fazerLogout}>
                                        <i className="ph-bold ph-sign-out"></i> Sair
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="main-content">
                        <div className="container">
                            
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-label">
                                        <i className="ph-fill ph-users"></i> Total de Clientes
                                    </div>
                                    <div className="stat-value">{totalClientes}</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">
                                        <i className="ph-fill ph-currency-circle-dollar"></i> Economia Total Gerada
                                    </div>
                                    <div className="stat-value">{formatarMoeda(totalEconomia)}</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-label">
                                        <i className="ph-fill ph-calendar-check"></i> Novos (Últimos 7 dias)
                                    </div>
                                    <div className="stat-value">{novos}</div>
                                </div>
                            </div>

                            <div className="card">
                                <div className="card-header">
                                    <div className="card-title">
                                        <i className="ph-fill ph-users-three" style={{color: 'var(--gold-primary)', fontSize: '28px'}}></i>
                                        Lista de Clientes
                                    </div>
                                    <button className="btn btn-sm" onClick={carregarClientes}>
                                        <i className="ph-bold ph-arrow-clockwise"></i> Atualizar
                                    </button>
                                </div>
                                
                                <div className="search-box">
                                    <i className="ph-bold ph-magnifying-glass search-icon"></i>
                                    <input type="text" 
                                           className="search-input" 
                                           placeholder="Buscar por nome, email, banco..."
                                           value={busca}
                                           onChange={(e) => setBusca(e.target.value)} />
                                </div>
                                
                                {clientesFiltrados.length === 0 ? (
                                    <div className="empty-state">
                                        <i className="ph-duotone ph-user-circle-plus"></i>
                                        <h3>Nenhum cliente encontrado</h3>
                                    </div>
                                ) : (
                                    <div className="table-container">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Nome</th>
                                                    <th>Email</th>
                                                    <th>Banco</th>
                                                    <th>Saldo Devedor</th>
                                                    <th>Economia</th>
                                                    <th>Sistema</th>
                                                    <th>Data</th>
                                                    <th>Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {clientesFiltrados.map(cliente => (
                                                    <tr key={cliente.id} onClick={() => abrirDashboard(cliente.id)}>
                                                        <td><strong>{cliente.nome}</strong></td>
                                                        <td style={{fontSize: '13px', color: 'var(--text-secondary)'}}>{cliente.email}</td>
                                                        <td>{cliente.banco}</td>
                                                        <td style={{fontFamily: 'var(--font-mono)'}}>{formatarMoeda(cliente.saldoDevedor)}</td>
                                                        <td style={{fontFamily: 'var(--font-mono)', color: 'var(--success)'}}><strong>{formatarMoeda(cliente.economia)}</strong></td>
                                                        <td><span className="badge info">{cliente.sistema}</span></td>
                                                        <td style={{fontSize: '13px', color: 'var(--text-secondary)'}}>{formatarData(cliente.data_cadastro)}</td>
                                                        <td>
                                                            <button className="btn btn-outline btn-sm" 
                                                                    onClick={(e) => { e.stopPropagation(); abrirDashboard(cliente.id); }}>
                                                                <i className="ph-bold ph-eye"></i> Ver
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                )}
                            </div>

                        </div>
                    </main>
                </>
            );
        }

        // ==================== DASHBOARD DO CLIENTE ====================
        function DashboardCliente({ cliente, voltarParaLista, fazerLogout }) {
            const [tabAtiva, setTabAtiva] = useState('visao-geral');

            const motor = new MotorCalculoCompleto({
                sistema: cliente.sistema,
                saldoDevedor: cliente.saldoDevedor,
                taxaNominal: cliente.taxaNominal,
                prazoRestante: cliente.prazoRestante,
                taxaAdm: cliente.taxaAdm || 25,
                seguroMensal: cliente.seguroMensal || 50,
                tr: 0.0015
            });

            const recursos = {
                valorFGTS: cliente.valorFGTS || 0,
                capacidadeExtra: cliente.capacidadeExtra || 0
            };

            const estrategiaOtima = motor.encontrarEstrategiaOtima(recursos, 'economia');
            const estrategiaOriginal = motor.simularCompleto(0, 0);

            const formatarMoeda = (valor, resumido = false) => {
                if (resumido && valor >= 1000000) return `R$ ${(valor / 1000000).toFixed(2)} Mi`;
                if (resumido && valor >= 1000) return `R$ ${(valor / 1000).toFixed(0)} Mil`;
                return new Intl.NumberFormat('pt-BR', {
                    style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0
                }).format(valor);
            };

            return (
                <>
                    <header className="header">
                        <div className="container">
                            <div className="header-content">
                                <div className="logo">
                                    <img src="https://meuecofin.com.br/wp-content/uploads/2025/02/Branco-PNG-e1740599425113.png" alt="EcoFin" />
                                </div>
                                <div className="header-actions">
                                    <div style={{fontSize: '14px', color: 'var(--text-secondary)'}}>
                                        Cliente: <strong style={{color: 'var(--gold-primary)'}}>{cliente.nome}</strong>
                                    </div>
                                    <button className="btn btn-outline btn-sm" onClick={() => window.print()}>
                                        <i className="ph-bold ph-download"></i> Exportar PDF
                                    </button>
                                    <button className="btn btn-sm" onClick={voltarParaLista}>
                                        <i className="ph-bold ph-arrow-left"></i> Voltar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="main-content">
                        <div className="container">
                            
                            <div className="hero-card">
                                <div className="hero-title">
                                    <i className="ph-fill ph-target" style={{color: 'var(--gold-primary)', fontSize: '40px'}}></i>
                                    Estratégia Personalizada
                                </div>
                                <p className="hero-subtitle">
                                    Baseada em 875 simulações diferentes, esta é a estratégia que maximiza a economia.
                                </p>
                                
                                <div className="hero-metrics">
                                    <div className="metric-box">
                                        <div className="metric-label">
                                            <i className="ph-fill ph-coin"></i> Economia Total
                                        </div>
                                        <div className="metric-value success">{formatarMoeda(estrategiaOtima?.economia || 0)}</div>
                                    </div>
                                    <div className="metric-box">
                                        <div className="metric-label">
                                            <i className="ph-fill ph-calendar-check"></i> Meses Economizados
                                        </div>
                                        <div className="metric-value warning">{estrategiaOtima?.reducaoPrazo || 0} meses</div>
                                    </div>
                                    <div className="metric-box">
                                        <div className="metric-label">
                                            <i className="ph-fill ph-clock-countdown"></i> Anos Mais Cedo
                                        </div>
                                        <div className="metric-value warning">{((estrategiaOtima?.reducaoPrazo || 0) / 12).toFixed(1)} anos</div>
                                    </div>
                                    <div className="metric-box">
                                        <div className="metric-label">
                                            <i className="ph-fill ph-chart-line-up"></i> ROI
                                        </div>
                                        <div className="metric-value gold">{(estrategiaOtima?.roi || 0).toFixed(1)}x</div>
                                    </div>
                                </div>
                            </div>

                            <div className="tabs">
                                <button className={`tab ${tabAtiva === 'visao-geral' ? 'active' : ''}`} 
                                        onClick={() => setTabAtiva('visao-geral')}>
                                    <i className="ph-bold ph-squares-four"></i> Visão Geral
                                </button>
                                <button className={`tab ${tabAtiva === 'plano-acao' ? 'active' : ''}`} 
                                        onClick={() => setTabAtiva('plano-acao')}>
                                    <i className="ph-bold ph-list-checks"></i> Plano de Ação
                                </button>
                                <button className={`tab ${tabAtiva === 'comparativo' ? 'active' : ''}`} 
                                        onClick={() => setTabAtiva('comparativo')}>
                                    <i className="ph-bold ph-chart-bar"></i> Comparativo
                                </button>
                            </div>

                            {tabAtiva === 'visao-geral' && (
                                <VisaoGeral 
                                    cliente={cliente} 
                                    estrategiaOtima={estrategiaOtima} 
                                    estrategiaOriginal={estrategiaOriginal}
                                    formatarMoeda={formatarMoeda} 
                                />
                            )}

                            {tabAtiva === 'plano-acao' && (
                                <PlanoAcao estrategiaOtima={estrategiaOtima} formatarMoeda={formatarMoeda} />
                            )}

                            {tabAtiva === 'comparativo' && (
                                <Comparativo 
                                    estrategiaOriginal={estrategiaOriginal} 
                                    estrategiaOtima={estrategiaOtima}
                                    formatarMoeda={formatarMoeda} 
                                />
                            )}

                        </div>
                    </main>
                </>
            );
        }

        // ==================== VISÃO GERAL ====================
        function VisaoGeral({ cliente, estrategiaOtima, estrategiaOriginal, formatarMoeda }) {
            return (
                <div>
                    <div className="grid-2">
                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">
                                    <i className="ph-fill ph-lightbulb" style={{color: 'var(--gold-primary)', fontSize: '24px'}}></i>
                                    Resumo da Estratégia
                                </div>
                                <span className="badge success">
                                    <i className="ph-fill ph-check-circle"></i> Otimizado
                                </span>
                            </div>
                            
                            <div style={{marginBottom: '24px'}}>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                    <span style={{fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 600}}>FGTS Inicial</span>
                                    <span style={{fontFamily: 'var(--font-mono)', fontSize: '18px', fontWeight: 700, color: 'var(--gold-primary)'}}>
                                        {formatarMoeda(estrategiaOtima?.fgtsUsado || 0)}
                                    </span>
                                </div>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                    <span style={{fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 600}}>Amortização Mensal</span>
                                    <span style={{fontFamily: 'var(--font-mono)', fontSize: '18px', fontWeight: 700, color: 'var(--gold-primary)'}}>
                                        {formatarMoeda(estrategiaOtima?.amortMensal || 0)}
                                    </span>
                                </div>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                    <span style={{fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 600}}>Duração</span>
                                    <span style={{fontFamily: 'var(--font-mono)', fontSize: '18px', fontWeight: 700, color: 'var(--gold-primary)'}}>
                                        {estrategiaOtima?.duracao === 999 ? 'Até quitar' : `${estrategiaOtima?.duracao} meses`}
                                    </span>
                                </div>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                    <span style={{fontSize: '13px', color: 'var(--text-secondary)', fontWeight: 600}}>Viabilidade</span>
                                    <span className={`badge ${estrategiaOtima?.viabilidade === 'ALTA' ? 'success' : 'warning'}`}>
                                        {estrategiaOtima?.viabilidade}
                                    </span>
                                </div>
                            </div>
                            
                            <div style={{padding: '20px', background: 'rgba(217,137,13,0.1)', borderRadius: '12px', border: '1px solid rgba(217,137,13,0.3)'}}>
                                <div style={{fontSize: '12px', color: 'var(--gold-primary)', marginBottom: '8px', fontWeight: 700}}>
                                    💡 INVESTIMENTO TOTAL
                                </div>
                                <div style={{fontFamily: 'var(--font-mono)', fontSize: '24px', fontWeight: 700}}>
                                    {formatarMoeda(estrategiaOtima?.investimentoTotal || 0)}
                                </div>
                                <div style={{fontSize: '12px', color: 'var(--text-secondary)', marginTop: '4px'}}>
                                    FGTS + Amortizações mensais
                                </div>
                            </div>
                        </div>

                        <div className="card">
                            <div className="card-header">
                                <div className="card-title">
                                    <i className="ph-fill ph-chart-bar-horizontal" style={{color: 'var(--gold-primary)', fontSize: '24px'}}></i>
                                    Comparativo Visual
                                </div>
                            </div>
                            
                            <div className="comparison-grid">
                                <div className="comparison-box danger">
                                    <div className="comparison-label" style={{color: 'var(--danger)'}}>
                                        <i className="ph-fill ph-warning"></i> Sem Estratégia
                                    </div>
                                    <div className="comparison-value" style={{color: 'var(--danger)'}}>
                                        {formatarMoeda(estrategiaOriginal?.totalPago, true)}
                                    </div>
                                    <div className="comparison-subtitle">
                                        Total pago em {Math.floor((estrategiaOriginal?.prazoMeses || 0) / 12)} anos
                                    </div>
                                </div>
                                <div className="comparison-box success">
                                    <div className="comparison-label" style={{color: 'var(--success)'}}>
                                        <i className="ph-fill ph-check-circle"></i> Com EcoFin
                                    </div>
                                    <div className="comparison-value" style={{color: 'var(--success)'}}>
                                        {formatarMoeda(estrategiaOtima?.totalPago, true)}
                                    </div>
                                    <div className="comparison-subtitle">
                                        Total pago em {Math.floor((estrategiaOtima?.prazoMeses || 0) / 12)} anos
                                    </div>
                                </div>
                            </div>
                            
                            <div className="progress-container">
                                <div className="progress-label">
                                    <span style={{color: 'var(--danger)'}}>SEM ESTRATÉGIA</span>
                                    <span>100%</span>
                                </div>
                                <div className="progress-bar">
                                    <div className="progress-fill danger" style={{width: '100%'}}></div>
                                </div>
                            </div>
                            
                            <div className="progress-container">
                                <div className="progress-label">
                                    <span style={{color: 'var(--success)'}}>COM ECOFIN</span>
                                    <span>{Math.round((estrategiaOtima?.totalPago / estrategiaOriginal?.totalPago) * 100)}%</span>
                                </div>
                                <div className="progress-bar">
                                    <div className="progress-fill success" 
                                         style={{width: `${(estrategiaOtima?.totalPago / estrategiaOriginal?.totalPago) * 100}%`}}></div>
                                </div>
                            </div>
                            
                            <div className="highlight-box" style={{marginTop: '24px', padding: '24px'}}>
                                <div className="highlight-label">💰 Você Economiza</div>
                                <div className="highlight-value" style={{fontSize: '36px'}}>
                                    {formatarMoeda(estrategiaOtima?.economia || 0)}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <i className="ph-fill ph-house" style={{color: 'var(--gold-primary)', fontSize: '24px'}}></i>
                                Dados do Financiamento
                            </div>
                            <span className="badge info">{cliente.sistema}</span>
                        </div>
                        
                        <div className="grid-2">
                            <div>
                                <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                                    <span style={{fontWeight: 600}}>Saldo Devedor:</span>
                                    <span style={{fontFamily: 'var(--font-mono)'}}>{formatarMoeda(cliente.saldoDevedor)}</span>
                                </div>
                                <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                                    <span style={{fontWeight: 600}}>Taxa de Juros:</span>
                                    <span style={{fontFamily: 'var(--font-mono)'}}>{(cliente.taxaNominal * 100).toFixed(2)}% a.a.</span>
                                </div>
                                <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                                    <span style={{fontWeight: 600}}>Prazo Original:</span>
                                    <span style={{fontFamily: 'var(--font-mono)'}}>{cliente.prazoRestante} meses</span>
                                </div>
                            </div>
                            <div>
                                <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                                    <span style={{fontWeight: 600}}>Taxa Admin:</span>
                                    <span style={{fontFamily: 'var(--font-mono)'}}>{formatarMoeda(cliente.taxaAdm)}/mês</span>
                                </div>
                                <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                                    <span style={{fontWeight: 600}}>Seguro:</span>
                                    <span style={{fontFamily: 'var(--font-mono)'}}>{formatarMoeda(cliente.seguroMensal)}/mês</span>
                                </div>
                                <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                                    <span style={{fontWeight: 600}}>Banco:</span>
                                    <span>{cliente.banco}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ==================== PLANO DE AÇÃO ====================
        function PlanoAcao({ estrategiaOtima, formatarMoeda }) {
            return (
                <div className="card">
                    <div className="card-header">
                        <div className="card-title">
                            <i className="ph-fill ph-list-checks" style={{color: 'var(--gold-primary)', fontSize: '24px'}}></i>
                            Seu Plano de Ação Passo a Passo
                        </div>
                    </div>
                    
                    <div className="timeline">
                        <div className="timeline-item">
                            <div className="timeline-number">1</div>
                            <div className="timeline-title">
                                <i className="ph-fill ph-bank"></i> AGORA: Usar o FGTS
                            </div>
                            <div className="timeline-description">
                                <strong>Use {formatarMoeda(estrategiaOtima?.fgtsUsado || 0)} do seu FGTS</strong> para amortização extraordinária.
                                Isso vai reduzir seu saldo devedor imediatamente e "quebrar a coluna vertebral" dos juros compostos.
                                <br/><br/>
                                📱 <strong>Como fazer:</strong> Acesse o app do seu banco → Financiamento Imobiliário → Usar FGTS → Amortizar Prazo
                                <br/>
                                💡 <strong>Dica:</strong> Escolha "reduzir PRAZO" (não parcela) para economizar mais juros.
                            </div>
                        </div>
                        
                        <div className="timeline-item">
                            <div className="timeline-number">2</div>
                            <div className="timeline-title">
                                <i className="ph-fill ph-calendar-plus"></i> MÊS 1-{estrategiaOtima?.duracao}: Amortização Mensal
                            </div>
                            <div className="timeline-description">
                                <strong>Amortize {formatarMoeda(estrategiaOtima?.amortMensal || 0)} extras por mês</strong> durante {estrategiaOtima?.duracao === 999 ? 'todo o período' : `${estrategiaOtima?.duracao} meses`}.
                                Isso vai acelerar dramaticamente a quitação e economizar centenas de milhares em juros.
                                <br/><br/>
                                📱 <strong>Como fazer:</strong> Configure um agendamento mensal no app do banco para fazer a amortização automaticamente.
                                <br/>
                                💡 <strong>Dica:</strong> Crie uma conta separada e transfira o valor todo início de mês para não gastar.
                            </div>
                        </div>
                        
                        <div className="timeline-item">
                            <div className="timeline-number">3</div>
                            <div className="timeline-title">
                                <i className="ph-fill ph-chart-line-up"></i> ACOMPANHAMENTO: Monitore Seu Progresso
                            </div>
                            <div className="timeline-description">
                                A cada amortização, você verá:
                                <br/>
                                ✅ Saldo devedor caindo mais rápido
                                <br/>
                                ✅ Prazo reduzindo mês a mês
                                <br/>
                                ✅ Juros economizados acumulando
                                <br/><br/>
                                📊 <strong>Acompanhe:</strong> Entre no app do banco mensalmente e compare o saldo com a projeção.
                            </div>
                        </div>
                        
                        <div className="timeline-item">
                            <div className="timeline-number">4</div>
                            <div className="timeline-title">
                                <i className="ph-fill ph-confetti"></i> MÊS {estrategiaOtima?.prazoMeses}: IMÓVEL QUITADO!
                            </div>
                            <div className="timeline-description">
                                <strong>Você será PROPRIETÁRIO livre de dívidas!</strong>
                                <br/><br/>
                                🎉 <strong>Conquistas:</strong>
                                <br/>
                                • Economizou {formatarMoeda(estrategiaOtima?.economia || 0)} em juros
                                <br/>
                                • Quitou {((estrategiaOtima?.reducaoPrazo || 0) / 12).toFixed(1)} anos ANTES do previsto
                                <br/>
                                • Imóvel 100% seu, sem banco no meio
                                <br/>
                                • ROI de {(estrategiaOtima?.roi || 0).toFixed(1)}x sobre o investimento extra
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ==================== COMPARATIVO ====================
        function Comparativo({ estrategiaOriginal, estrategiaOtima, formatarMoeda }) {
            return (
                <div className="grid-2">
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <i className="ph-fill ph-x-circle" style={{color: 'var(--danger)', fontSize: '24px'}}></i>
                                Sem Estratégia
                            </div>
                            <span className="badge" style={{background: 'rgba(239,68,68,0.15)', color: 'var(--danger)', border: '1px solid rgba(239,68,68,0.3)'}}>
                                Cenário Padrão
                            </span>
                        </div>
                        
                        <div style={{marginBottom: '20px'}}>
                            <div style={{fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '8px'}}>TOTAL PAGO</div>
                            <div style={{fontFamily: 'var(--font-mono)', fontSize: '32px', fontWeight: 700, color: 'var(--danger)'}}>
                                {formatarMoeda(estrategiaOriginal?.totalPago)}
                            </div>
                        </div>
                        
                        <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                            <span style={{fontWeight: 600}}>Principal:</span>
                            <span style={{fontFamily: 'var(--font-mono)'}}>
                                {formatarMoeda(estrategiaOriginal?.totalPago - estrategiaOriginal?.totalJuros)}
                            </span>
                        </div>
                        <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                            <span style={{fontWeight: 600}}>Juros Totais:</span>
                            <span style={{fontFamily: 'var(--font-mono)', color: 'var(--danger)'}}>
                                {formatarMoeda(estrategiaOriginal?.totalJuros)}
                            </span>
                        </div>
                        <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between', paddingTop: '12px', borderTop: '1px solid var(--border-light)'}}>
                            <span style={{fontWeight: 600}}>Prazo Final:</span>
                            <span style={{fontFamily: 'var(--font-mono)', fontWeight: 700}}>
                                {estrategiaOriginal?.prazoMeses} meses
                            </span>
                        </div>
                        
                        <div style={{marginTop: '24px', padding: '16px', background: 'rgba(239,68,68,0.1)', borderLeft: '4px solid var(--danger)', borderRadius: '8px'}}>
                            <div style={{fontSize: '12px', fontWeight: 700, marginBottom: '6px', color: 'var(--danger)'}}>
                                ⚠️ IMPACTO REAL
                            </div>
                            <div style={{fontSize: '14px', color: 'var(--text-secondary)'}}>
                                Você pagará múltiplas vezes o valor do imóvel em juros e taxas.
                            </div>
                        </div>
                    </div>
                    
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <i className="ph-fill ph-check-circle" style={{color: 'var(--success)', fontSize: '24px'}}></i>
                                Com EcoFin
                            </div>
                            <span className="badge success">Otimizado</span>
                        </div>
                        
                        <div style={{marginBottom: '20px'}}>
                            <div style={{fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '8px'}}>TOTAL PAGO</div>
                            <div style={{fontFamily: 'var(--font-mono)', fontSize: '32px', fontWeight: 700, color: 'var(--success)'}}>
                                {formatarMoeda(estrategiaOtima?.totalPago)}
                            </div>
                        </div>
                        
                        <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                            <span style={{fontWeight: 600}}>Principal:</span>
                            <span style={{fontFamily: 'var(--font-mono)'}}>
                                {formatarMoeda(estrategiaOtima?.totalPago - estrategiaOtima?.totalJuros)}
                            </span>
                        </div>
                        <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between'}}>
                            <span style={{fontWeight: 600}}>Juros Totais:</span>
                            <span style={{fontFamily: 'var(--font-mono)', color: 'var(--success)'}}>
                                {formatarMoeda(estrategiaOtima?.totalJuros)}
                            </span>
                        </div>
                        <div style={{marginBottom: '12px', display: 'flex', justifyContent: 'space-between', paddingTop: '12px', borderTop: '1px solid var(--border-light)'}}>
                            <span style={{fontWeight: 600}}>Prazo Final:</span>
                            <span style={{fontFamily: 'var(--font-mono)', fontWeight: 700}}>
                                {estrategiaOtima?.prazoMeses} meses
                            </span>
                        </div>
                        
                        <div style={{marginTop: '24px', padding: '16px', background: 'rgba(16,185,129,0.1)', borderLeft: '4px solid var(--success)', borderRadius: '8px'}}>
                            <div style={{fontSize: '12px', fontWeight: 700, marginBottom: '6px', color: 'var(--success)'}}>
                                ✅ VANTAGENS
                            </div>
                            <div style={{fontSize: '14px', color: 'var(--text-secondary)'}}>
                                • Economiza <strong style={{color: 'white'}}>{formatarMoeda(estrategiaOtima?.economia)}</strong> em juros<br/>
                                • Quitação <strong style={{color: 'white'}}>{((estrategiaOtima?.reducaoPrazo || 0) / 12).toFixed(1)} anos antes</strong><br/>
                                • ROI de <strong style={{color: 'white'}}>{(estrategiaOtima?.roi || 0).toFixed(1)}x</strong>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ==================== RENDER ====================
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
